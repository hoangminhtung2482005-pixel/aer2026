<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AER 2026 AoV Esports Rankings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0B1120; }
        /* Tùy chỉnh màu sắc Badge Tier giống ảnh */
        .badge-S { background-color: rgba(234, 179, 8, 0.1); color: #eab308; border: 1px solid rgba(234, 179, 8, 0.3); }
        .badge-A { background-color: rgba(168, 85, 247, 0.1); color: #a855f7; border: 1px solid rgba(168, 85, 247, 0.3); }
        .badge-B { background-color: rgba(59, 130, 246, 0.1); color: #3b82f6; border: 1px solid rgba(59, 130, 246, 0.3); }
        .badge-C { background-color: rgba(34, 197, 94, 0.1); color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.3); }
        .badge-D { background-color: rgba(100, 116, 139, 0.1); color: #94a3b8; border: 1px solid rgba(100, 116, 139, 0.3); }
        
        /* Rank Huy Chương */
        .rank-1 { background-color: #eab308; color: #0f172a; } /* Gold */
        .rank-2 { background-color: #cbd5e1; color: #0f172a; } /* Silver */
        .rank-3 { background-color: #d97706; color: #ffffff; } /* Bronze */
        
        /* Tùy chỉnh thanh cuộn */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body class="text-slate-300 antialiased min-h-screen p-4 md:p-8">

    <div class="max-w-7xl mx-auto space-y-8">
        
        <header class="flex flex-col md:flex-row justify-between items-center gap-4 bg-[#111827] p-4 rounded-xl border border-slate-800">
            <div class="flex items-center gap-3">
                <img src="img/aer_logo.png" alt="AER Logo" class="w-12 h-12 object-contain drop-shadow-[0_0_8px_rgba(59,130,246,0.6)] hover:scale-110 transition-transform">
                <div>
                    <h1 class="text-lg font-bold text-white leading-tight">AER 2026</h1>
                    <p class="text-[10px] text-slate-400 font-semibold tracking-widest uppercase">AoV Esports Rankings</p>
                </div>
            </div>

            <div class="relative w-full md:w-96">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <input type="text" id="searchInput" placeholder="Search for teams, regions..." class="w-full bg-[#1e293b] text-sm text-white rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500 border border-slate-700 placeholder-slate-500 transition-all">
            </div>

            <div class="flex gap-2" id="filter-buttons">
                <button onclick="filterRegion('All')" class="filter-btn active bg-blue-600 hover:bg-blue-500 text-white px-4 py-1.5 rounded-lg text-sm font-medium transition-colors border border-blue-500">All</button>
                <button onclick="filterRegion('RPL')" class="filter-btn bg-[#1e293b] hover:bg-slate-700 text-slate-300 px-4 py-1.5 rounded-lg text-sm font-medium transition-colors border border-slate-700">RPL</button>
                <button onclick="filterRegion('AOG')" class="filter-btn bg-[#1e293b] hover:bg-slate-700 text-slate-300 px-4 py-1.5 rounded-lg text-sm font-medium transition-colors border border-slate-700">AOG</button>
                <button onclick="filterRegion('GCS')" class="filter-btn bg-[#1e293b] hover:bg-slate-700 text-slate-300 px-4 py-1.5 rounded-lg text-sm font-medium transition-colors border border-slate-700">GCS</button>
            </div>
        </header>

        <section>
            <div class="flex items-center gap-2 mb-4 text-sm font-semibold text-slate-400 tracking-wider">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                REGIONAL STRENGTH (ARG)
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-[#111827] rounded-xl p-5 border border-slate-800 relative overflow-hidden group">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-blue-300 opacity-80"></div>
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center gap-3">
                            <img src="img/RPL_logo.png" class="w-10 h-10 object-contain drop-shadow-[0_0_5px_rgba(59,130,246,0.5)]" onerror="this.style.display='none'">
                            <div>
                                <h3 class="text-xl font-bold text-white flex items-center gap-2">RPL <span class="w-2 h-2 rounded-full bg-blue-500"></span></h3>
                                <p class="text-xs text-slate-500">RoV Pro League</p>
                            </div>
                        </div>
                        <span class="text-[10px] font-semibold text-blue-400 bg-blue-900/30 px-2 py-1 rounded border border-blue-800/50">Active</span>
                    </div>
                    <div class="flex justify-between items-end">
                        <div>
                            <p class="text-3xl font-extrabold text-white" id="arg-RPL">--</p>
                            <p class="text-xs text-slate-500 uppercase tracking-widest font-semibold mt-1">AVG ELO</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xl font-bold text-slate-300" id="count-RPL">--</p>
                            <p class="text-xs text-slate-500 uppercase tracking-widest font-semibold mt-1">TEAMS</p>
                        </div>
                    </div>
                </div>

                <div class="bg-[#111827] rounded-xl p-5 border border-slate-800 relative overflow-hidden group">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 to-red-400 opacity-80"></div>
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center gap-3">
                            <img src="img/AOG_logo.png" class="w-10 h-10 object-contain drop-shadow-[0_0_5px_rgba(239,68,68,0.5)]" onerror="this.style.display='none'">
                            <div>
                                <h3 class="text-xl font-bold text-white flex items-center gap-2">AOG <span class="w-2 h-2 rounded-full bg-red-500"></span></h3>
                                <p class="text-xs text-slate-500">Arena of Glory</p>
                            </div>
                        </div>
                        <span class="text-[10px] font-semibold text-red-400 bg-red-900/30 px-2 py-1 rounded border border-red-800/50">Active</span>
                    </div>
                    <div class="flex justify-between items-end">
                        <div>
                            <p class="text-3xl font-extrabold text-white" id="arg-AOG">--</p>
                            <p class="text-xs text-slate-500 uppercase tracking-widest font-semibold mt-1">AVG ELO</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xl font-bold text-slate-300" id="count-AOG">--</p>
                            <p class="text-xs text-slate-500 uppercase tracking-widest font-semibold mt-1">TEAMS</p>
                        </div>
                    </div>
                </div>

                <div class="bg-[#111827] rounded-xl p-5 border border-slate-800 relative overflow-hidden group">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500 to-yellow-300 opacity-80"></div>
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center gap-3">
                            <img src="img/GCS_logo.png" class="w-10 h-10 object-contain drop-shadow-[0_0_5px_rgba(234,179,8,0.5)]" onerror="this.style.display='none'">
                            <div>
                                <h3 class="text-xl font-bold text-white flex items-center gap-2">GCS <span class="w-2 h-2 rounded-full bg-yellow-500"></span></h3>
                                <p class="text-xs text-slate-500">Garena Challenger</p>
                            </div>
                        </div>
                        <span class="text-[10px] font-semibold text-yellow-400 bg-yellow-900/30 px-2 py-1 rounded border border-yellow-800/50">Active</span>
                    </div>
                    <div class="flex justify-between items-end">
                        <div>
                            <p class="text-3xl font-extrabold text-white" id="arg-GCS">--</p>
                            <p class="text-xs text-slate-500 uppercase tracking-widest font-semibold mt-1">AVG ELO</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xl font-bold text-slate-300" id="count-GCS">--</p>
                            <p class="text-xs text-slate-500 uppercase tracking-widest font-semibold mt-1">TEAMS</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-[#111827] rounded-xl border border-slate-800 overflow-hidden shadow-2xl">
            <div class="flex justify-between items-center p-5 border-b border-slate-800">
                <h2 class="text-lg font-bold text-white">Live Rankings</h2>
                <span class="text-xs text-slate-500 font-mono" id="last-updated">Last updated: Just now</span>
            </div>

            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse min-w-[800px]">
                    <thead>
                        <tr class="text-xs text-slate-500 uppercase tracking-wider border-b border-slate-800 bg-[#0f1523]">
                            <th class="py-4 pl-6 pr-4 font-semibold w-16 text-center">#</th>
                            <th class="p-4 font-semibold">TÊN ĐỘI</th>
                            <th class="p-4 font-semibold">KHU VỰC</th>
                            <th class="p-4 font-semibold text-center">Tier</th>
                            <th class="p-4 font-semibold text-center">ĐIỂM AER</th>
                            <th class="p-4 font-semibold text-center">SỐ TRẬN</th>
                            <th class="p-4 font-semibold text-center">VÁN THẮNG/THUA</th>
                            <th class="p-4 font-semibold text-right pr-6">TỶ LỆ THẮNG</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-body" class="divide-y divide-slate-800/50">
                        </tbody>
                </table>
            </div>
        </section>

    </div>

    <script src="data.js"></script>

    <script>
        let currentFilter = 'All';
        let searchQuery = '';

        function renderDashboard() {
            if (typeof AER_DATA === 'undefined') {
                document.getElementById('leaderboard-body').innerHTML = `<tr><td colspan="8" class="p-8 text-center text-red-400">Không tìm thấy dữ liệu. Hãy chạy file main.py trước!</td></tr>`;
                return;
            }

            // 1. TÍNH TOÁN ARG CHO 3 THẺ KHU VỰC
            ['RPL', 'AOG', 'GCS'].forEach(region => {
                const teamsInRegion = AER_DATA.filter(t => t.region === region);
                const count = teamsInRegion.length;
                let arg = 0;
                if(count > 0) {
                    const totalScore = teamsInRegion.reduce((sum, team) => sum + team.score, 0);
                    arg = Math.round(totalScore / count);
                }
                document.getElementById(`arg-${region}`).innerText = count > 0 ? arg.toLocaleString() : '--';
                document.getElementById(`count-${region}`).innerText = count > 0 ? count : '--';
            });

            // 2. LỌC VÀ TÌM KIẾM DỮ LIỆU BẢNG
            let filteredData = AER_DATA.filter(team => {
                const matchRegion = currentFilter === 'All' || team.region === currentFilter;
                const matchSearch = team.team.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                    team.region.toLowerCase().includes(searchQuery.toLowerCase());
                return matchRegion && matchSearch;
            });

            // 3. VẼ BẢNG
            const tbody = document.getElementById('leaderboard-body');
            let htmlContent = '';

            if (filteredData.length === 0) {
                htmlContent = `<tr><td colspan="8" class="p-8 text-center text-slate-500">No teams found matching your criteria.</td></tr>`;
            }

            filteredData.forEach(team => {
                // Xử lý Huy chương (Vàng, Bạc, Đồng)
                let rankDisplay = `<span class="text-slate-500 font-semibold">${team.rank}</span>`;
                if (team.rank === 1) rankDisplay = `<div class="w-8 h-8 rounded-full rank-1 flex items-center justify-center font-bold text-sm mx-auto shadow-[0_0_10px_rgba(234,179,8,0.5)]">${team.rank}</div>`;
                if (team.rank === 2) rankDisplay = `<div class="w-8 h-8 rounded-full rank-2 flex items-center justify-center font-bold text-sm mx-auto">${team.rank}</div>`;
                if (team.rank === 3) rankDisplay = `<div class="w-8 h-8 rounded-full rank-3 flex items-center justify-center font-bold text-sm mx-auto">${team.rank}</div>`;

                // Xử lý màu sắc khu vực
                let regionColorClass = 'text-slate-400';
                if (team.region === 'RPL') regionColorClass = 'text-blue-400';
                else if (team.region === 'AOG') regionColorClass = 'text-red-400';
                else if (team.region === 'GCS') regionColorClass = 'text-yellow-400';

                // Xử lý màu sắc Game W/L
                const wlParts = team.gw_gl.split('/');
                const gw = wlParts[0] || '0';
                const gl = wlParts[1] || '0';
                const wlDisplay = `<span class="text-emerald-400">${gw}</span> <span class="text-slate-600 mx-1">/</span> <span class="text-red-400">${gl}</span>`;

                // Xử lý màu sắc Win Rate
                const wrValue = parseFloat(team.win_rate);
                const wrColor = wrValue >= 50 ? 'text-emerald-400' : 'text-red-400';

                htmlContent += `
                    <tr class="hover:bg-slate-800/50 transition-colors duration-200 group">
                        <td class="py-4 pl-6 pr-4 text-center">${rankDisplay}</td>
                        <td class="p-4">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 flex items-center justify-center flex-shrink-0">
                                    <img src="img/${team.team}.png" alt="${team.team}" class="max-w-full max-h-full object-contain drop-shadow-lg group-hover:scale-110 transition-transform duration-300" 
                                         onerror="this.onerror=null; this.outerHTML='<div class=\\'w-9 h-9 bg-[#1e293b] rounded border border-slate-700 flex items-center justify-center\\'><span class=\\'text-slate-400 text-xs font-black uppercase\\'>${team.team.substring(0,2)}</span></div>';">
                                </div>
                                <span class="font-bold text-white text-base group-hover:text-blue-400 transition-colors">${team.team}</span>
                            </div>
                        </td>
                        <td class="p-4 font-medium ${regionColorClass}">${team.region}</td>
                        <td class="p-4 text-center">
                            <span class="px-2.5 py-1 rounded-md text-xs font-bold tracking-wide badge-${team.tier}">
                                Tier ${team.tier}
                            </span>
                        </td>
                        <td class="p-4 text-center font-bold text-lg text-white">${team.score.toLocaleString()}</td>
                        <td class="p-4 text-center text-slate-400">${team.matches}</td>
                        <td class="p-4 text-center font-semibold tracking-wide">${wlDisplay}</td>
                        <td class="p-4 text-right pr-6 font-bold ${wrColor}">${team.win_rate}</td>
                    </tr>
                `;
            });

            tbody.innerHTML = htmlContent;
        }

        // Logic xử lý nút Filter
        function filterRegion(region) {
            currentFilter = region;
            
            // Cập nhật giao diện nút
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.innerText === region) {
                    btn.classList.remove('bg-[#1e293b]', 'text-slate-300', 'border-slate-700');
                    btn.classList.add('bg-blue-600', 'text-white', 'border-blue-500');
                } else {
                    btn.classList.remove('bg-blue-600', 'text-white', 'border-blue-500');
                    btn.classList.add('bg-[#1e293b]', 'text-slate-300', 'border-slate-700');
                }
            });
            
            renderDashboard();
        }

        // Logic xử lý thanh Search
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderDashboard();
        });

       // Cập nhật ngày và giờ
        const now = new Date();
        const dateString = now.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric' });
        const timeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        document.getElementById('last-updated').innerText = "Cập nhật cuối: " + dateString + " | " + timeString;

        // Khởi chạy khi load trang
        window.onload = renderDashboard;
    </script>
</body>
</html>